<template>
<div class="login-modal">
<div class="modal-content">
<h2>NGO Logistics</h2>
<p>Humanitarian Supply Chain Management</p>
<form @submit.prevent="handleLogin" class="login-form">
<div class="form-group">
<label>Email</label>
<input
v-model="email"
type="email"
placeholder="ngoadmin@logistics.org"
required
/>
</div>
<div class="form-group">
<label>Password</label>
<input
v-model="password"
type="password"
placeholder="••••••••"
required
/>
</div>
<div class="credentials-hint">
Email: <strong>ngoadmin@logistics.org</strong><br>
Password: <strong>NgoAdmin123!</strong>
</div>
<button type="submit" class="btn-primary" :disabled="loading">
{{ loading ? 'Logging in...' : 'Login' }}
</button>
<div v-if="error" class="error">{{ error }}</div>
</form>
<div class="footer">
<small>© NGO Logistics System | East Africa Operations</small>
</div>
</div>
</div>
</template>
<script>
import { ref } from 'vue';
import { useRouter } from 'vue-router';
export default {
name: 'Login',
setup() {
const email = ref('');
const password = ref('');
const error = ref('');
const loading = ref(false);
const router = useRouter();
const handleLogin = async () => {
loading.value = true;
error.value = '';
try {
  const url = import.meta.env.VITE_API_URL + '/api/auth/login';
  const response = await fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email: email.value, password: password.value })
  });
  const data = await response.json();
  if (!response.ok) throw new Error(data.error || 'Login failed');
  localStorage.setItem('token', data.token);
  await router.push('/dashboard');
} catch (err) {
  console.error('Login error:', err);
  error.value = err.message;
} finally {
  loading.value = false;
}
};
return { email, password, error, loading, handleLogin };
}
};
</script>
<style scoped>
.login-modal {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(4px);
}
.modal-content {
  background: white;
  padding: 2.5rem;
  border-radius: 12px;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
h2 { color: #1a365d; margin-bottom: 0.5rem; }
p { color: #4a5568; margin-bottom: 2rem; }
.login-form { text-align: left; }
.form-group { margin-bottom: 1.25rem; }
label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2d3748; }
input {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e2e8f0;
  border-radius: 6px;
  font-size: 1rem;
  transition: border-color 0.2s;
}
input:focus { outline: none; border-color: #3182ce; }
.credentials-hint {
  margin-bottom: 1.25rem;
  font-size: 0.9rem;
  color: #4a5568;
  line-height: 1.4;
  text-align: left;
}
.btn-primary {
  width: 100%;
  padding: 0.875rem;
  background: #2b6cb0;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.btn-primary:hover:not(:disabled) { background: #2c5282; }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }
.error {
  color: #e53e3e;
  margin-top: 1rem;
  padding: 0.5rem;
  background: #fee;
  border-radius: 4px;
}
.footer { margin-top: 2rem; color: #718096; font-size: 0.875rem; }
</style>
